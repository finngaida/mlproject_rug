Lmod has detected the following error: These module(s) exist but cannot be
loaded as requested: "foss/2018a"

   Try: "module spider foss/2018a" to see how to load the module(s).




Collecting numpy==1.14
  Using cached https://files.pythonhosted.org/packages/0d/8a/e0223a40f980e0442a2045dcf79e4a8a90339593525599a0add318da2428/numpy-1.14.0-cp27-cp27mu-manylinux1_x86_64.whl
Installing collected packages: numpy
Successfully installed numpy-1.11.1
You are using pip version 8.1.2, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Requirement already satisfied (use --upgrade to upgrade): tensorflow-gpu in /home/s3801128/.local/lib/python2.7/site-packages
Requirement already satisfied (use --upgrade to upgrade): protobuf>=3.4.0 in /apps/sandybridge/software/protobuf-python/3.4.0-foss-2016a-Python-2.7.12/lib/python2.7/site-packages/protobuf-3.4.0-py2.7.egg (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): enum34>=1.1.6 in /apps/sandybridge/software/Python/2.7.12-foss-2016a/lib/python2.7/site-packages/enum34-1.1.6-py2.7.egg (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): wheel in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): astor>=0.6.0 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): backports.weakref>=1.0rc1 in /apps/sandybridge/software/tensorflow/1.3.1-foss-2016a-Python-2.7.12-CUDA-8.0.61/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): mock>=2.0.0 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): termcolor>=1.1.0 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): gast>=0.2.0 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): tensorboard<1.8.0,>=1.7.0 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): absl-py>=0.1.6 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): grpcio>=1.8.6 in /home/s3801128/.local/lib/python2.7/site-packages (from tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): six>=1.10.0 in /apps/sandybridge/software/Python/2.7.12-foss-2016a/lib/python2.7/site-packages/six-1.10.0-py2.7.egg (from tensorflow-gpu)
Collecting numpy>=1.13.3 (from tensorflow-gpu)
  Using cached https://files.pythonhosted.org/packages/9f/85/163127d3fb0573deb9eca947cfc73aa3618eaaf8656501460574471d114a/numpy-1.16.0-cp27-cp27mu-manylinux1_x86_64.whl
Requirement already satisfied (use --upgrade to upgrade): setuptools in /apps/sandybridge/software/Python/2.7.12-foss-2016a/lib/python2.7/site-packages/setuptools-23.1.0-py2.7.egg (from protobuf>=3.4.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): funcsigs>=1; python_version < "3.3" in /apps/sandybridge/software/Python/2.7.12-foss-2016a/lib/python2.7/site-packages/funcsigs-1.0.2-py2.7.egg (from mock>=2.0.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): pbr>=0.11 in /home/s3801128/.local/lib/python2.7/site-packages (from mock>=2.0.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): futures>=3.1.1; python_version < "3" in /home/s3801128/.local/lib/python2.7/site-packages (from tensorboard<1.8.0,>=1.7.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): bleach==1.5.0 in /apps/sandybridge/software/tensorflow/1.3.1-foss-2016a-Python-2.7.12-CUDA-8.0.61/lib/python2.7/site-packages (from tensorboard<1.8.0,>=1.7.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): html5lib==0.9999999 in /apps/sandybridge/software/tensorflow/1.3.1-foss-2016a-Python-2.7.12-CUDA-8.0.61/lib/python2.7/site-packages (from tensorboard<1.8.0,>=1.7.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): werkzeug>=0.11.10 in /apps/sandybridge/software/tensorflow/1.3.1-foss-2016a-Python-2.7.12-CUDA-8.0.61/lib/python2.7/site-packages (from tensorboard<1.8.0,>=1.7.0->tensorflow-gpu)
Requirement already satisfied (use --upgrade to upgrade): markdown>=2.6.8 in /apps/sandybridge/software/tensorflow/1.3.1-foss-2016a-Python-2.7.12-CUDA-8.0.61/lib/python2.7/site-packages (from tensorboard<1.8.0,>=1.7.0->tensorflow-gpu)
Installing collected packages: numpy
Successfully installed numpy-1.11.1
You are using pip version 8.1.2, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Collecting Cython==0.28
  Using cached https://files.pythonhosted.org/packages/f7/a1/0ecf3ace2e97eaf63f93931be38361763fff0118aca6b70119dde9867e14/Cython-0.28-cp27-cp27mu-manylinux1_x86_64.whl
Installing collected packages: Cython
Successfully installed Cython-0.24
You are using pip version 8.1.2, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Requirement already satisfied (use --upgrade to upgrade): configparser in /home/s3801128/.local/lib/python2.7/site-packages
You are using pip version 8.1.2, however version 18.1 is available.
You should consider upgrading via the 'pip install --upgrade pip' command.
Traceback (most recent call last):
  File "setup.py", line 66, in <module>
    setup_requires = ["cython>=0.28", "numpy>=1.14.0"]
  File "/software/software/Python/2.7.12-foss-2016a/lib/python2.7/distutils/core.py", line 111, in setup
    _setup_distribution = dist = klass(attrs)
  File "build/bdist.linux-x86_64/egg/setuptools/dist.py", line 269, in __init__
  File "build/bdist.linux-x86_64/egg/setuptools/dist.py", line 313, in fetch_build_eggs
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 826, in resolve
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 1085, in best_match
  File "build/bdist.linux-x86_64/egg/pkg_resources/__init__.py", line 695, in find
pkg_resources.VersionConflict: (Cython 0.24 (/apps/sandybridge/software/Python/2.7.12-foss-2016a/lib/python2.7/site-packages/Cython-0.24-py2.7-linux-x86_64.egg), Requirement.parse('cython>=0.28'))
Using TensorFlow backend.
keras_retinanet/bin/train.py:353: UserWarning: Using experimental backbone vgg16. Only resnet50 has been properly tested.
  warnings.warn('Using experimental backbone {}. Only resnet50 has been properly tested.'.format(parsed_args.backbone))
2019-01-16 09:09:29.074787: I tensorflow/core/common_runtime/gpu/gpu_device.cc:955] Found device 0 with properties: 
name: Tesla K40m
major: 3 minor: 5 memoryClockRate (GHz) 0.745
pciBusID 0000:82:00.0
Total memory: 11.17GiB
Free memory: 11.10GiB
2019-01-16 09:09:29.074888: I tensorflow/core/common_runtime/gpu/gpu_device.cc:976] DMA: 0 
2019-01-16 09:09:29.074913: I tensorflow/core/common_runtime/gpu/gpu_device.cc:986] 0:   Y 
2019-01-16 09:09:29.074940: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1045] Creating TensorFlow device (/gpu:0) -> (device: 0, name: Tesla K40m, pci bus id: 0000:82:00.0)
Creating model, this may take a second...
__________________________________________________________________________________________________
Layer (type)                    Output Shape         Param #     Connected to                     
==================================================================================================
input_1 (InputLayer)            (None, None, None, 3 0                                            
__________________________________________________________________________________________________
block1_conv1 (Conv2D)           (None, None, None, 6 1792        input_1[0][0]                    
__________________________________________________________________________________________________
block1_conv2 (Conv2D)           (None, None, None, 6 36928       block1_conv1[0][0]               
__________________________________________________________________________________________________
block1_pool (MaxPooling2D)      (None, None, None, 6 0           block1_conv2[0][0]               
__________________________________________________________________________________________________
block2_conv1 (Conv2D)           (None, None, None, 1 73856       block1_pool[0][0]                
__________________________________________________________________________________________________
block2_conv2 (Conv2D)           (None, None, None, 1 147584      block2_conv1[0][0]               
__________________________________________________________________________________________________
block2_pool (MaxPooling2D)      (None, None, None, 1 0           block2_conv2[0][0]               
__________________________________________________________________________________________________
block3_conv1 (Conv2D)           (None, None, None, 2 295168      block2_pool[0][0]                
__________________________________________________________________________________________________
block3_conv2 (Conv2D)           (None, None, None, 2 590080      block3_conv1[0][0]               
__________________________________________________________________________________________________
block3_conv3 (Conv2D)           (None, None, None, 2 590080      block3_conv2[0][0]               
__________________________________________________________________________________________________
block3_pool (MaxPooling2D)      (None, None, None, 2 0           block3_conv3[0][0]               
__________________________________________________________________________________________________
block4_conv1 (Conv2D)           (None, None, None, 5 1180160     block3_pool[0][0]                
__________________________________________________________________________________________________
block4_conv2 (Conv2D)           (None, None, None, 5 2359808     block4_conv1[0][0]               
__________________________________________________________________________________________________
block4_conv3 (Conv2D)           (None, None, None, 5 2359808     block4_conv2[0][0]               
__________________________________________________________________________________________________
block4_pool (MaxPooling2D)      (None, None, None, 5 0           block4_conv3[0][0]               
__________________________________________________________________________________________________
block5_conv1 (Conv2D)           (None, None, None, 5 2359808     block4_pool[0][0]                
__________________________________________________________________________________________________
block5_conv2 (Conv2D)           (None, None, None, 5 2359808     block5_conv1[0][0]               
__________________________________________________________________________________________________
block5_conv3 (Conv2D)           (None, None, None, 5 2359808     block5_conv2[0][0]               
__________________________________________________________________________________________________
block5_pool (MaxPooling2D)      (None, None, None, 5 0           block5_conv3[0][0]               
__________________________________________________________________________________________________
C5_reduced (Conv2D)             (None, None, None, 2 131328      block5_pool[0][0]                
__________________________________________________________________________________________________
P5_upsampled (UpsampleLike)     (None, None, None, 2 0           C5_reduced[0][0]                 
                                                                 block4_pool[0][0]                
__________________________________________________________________________________________________
C4_reduced (Conv2D)             (None, None, None, 2 131328      block4_pool[0][0]                
__________________________________________________________________________________________________
P4_merged (Add)                 (None, None, None, 2 0           P5_upsampled[0][0]               
                                                                 C4_reduced[0][0]                 
__________________________________________________________________________________________________
P4_upsampled (UpsampleLike)     (None, None, None, 2 0           P4_merged[0][0]                  
                                                                 block3_pool[0][0]                
__________________________________________________________________________________________________
C3_reduced (Conv2D)             (None, None, None, 2 65792       block3_pool[0][0]                
__________________________________________________________________________________________________
P6 (Conv2D)                     (None, None, None, 2 1179904     block5_pool[0][0]                
__________________________________________________________________________________________________
P3_merged (Add)                 (None, None, None, 2 0           P4_upsampled[0][0]               
                                                                 C3_reduced[0][0]                 
__________________________________________________________________________________________________
C6_relu (Activation)            (None, None, None, 2 0           P6[0][0]                         
__________________________________________________________________________________________________
P3 (Conv2D)                     (None, None, None, 2 590080      P3_merged[0][0]                  
__________________________________________________________________________________________________
P4 (Conv2D)                     (None, None, None, 2 590080      P4_merged[0][0]                  
__________________________________________________________________________________________________
P5 (Conv2D)                     (None, None, None, 2 590080      C5_reduced[0][0]                 
__________________________________________________________________________________________________
P7 (Conv2D)                     (None, None, None, 2 590080      C6_relu[0][0]                    
__________________________________________________________________________________________________
regression_submodel (Model)     (None, None, 4)      2443300     P3[0][0]                         
                                                                 P4[0][0]                         
                                                                 P5[0][0]                         
                                                                 P6[0][0]                         
                                                                 P7[0][0]                         
__________________________________________________________________________________________________
classification_submodel (Model) (None, None, 2)      2401810     P3[0][0]                         
                                                                 P4[0][0]                         
                                                                 P5[0][0]                         
                                                                 P6[0][0]                         
                                                                 P7[0][0]                         
__________________________________________________________________________________________________
regression (Concatenate)        (None, None, 4)      0           regression_submodel[1][0]        
                                                                 regression_submodel[2][0]        
                                                                 regression_submodel[3][0]        
                                                                 regression_submodel[4][0]        
                                                                 regression_submodel[5][0]        
__________________________________________________________________________________________________
classification (Concatenate)    (None, None, 2)      0           classification_submodel[1][0]    
                                                                 classification_submodel[2][0]    
                                                                 classification_submodel[3][0]    
                                                                 classification_submodel[4][0]    
                                                                 classification_submodel[5][0]    
==================================================================================================
Total params: 23,428,470
Trainable params: 8,713,782
Non-trainable params: 14,714,688
__________________________________________________________________________________________________
None
Epoch 1/50
/var/spool/slurmd/job3380549/slurm_script: line 41: 126847 Killed                  python keras_retinanet/bin/train.py --weights snapshots/vgg_model.h5 --freeze-backbone --backbone vgg16 --batch-size 500 --tensorboard-dir ./logs_temp csv train_data_bp.csv class.csv
slurmstepd: error: Detected 2 oom-kill event(s) in step 3380549.batch cgroup. Some of your processes may have been killed by the cgroup out-of-memory handler.


###############################################################################
Peregrine Cluster
Job 3380549 for user 's3801128'
Finished at: Wed Jan 16 09:11:38 CET 2019

Job details:
============

Name                : Train retinanet multi gpu vgg backbone 500 batch size
User                : s3801128
Partition           : gpu
Nodes               : pg-gpu01
Cores               : 12
State               : OUT_OF_MEMORY
Submit              : 2019-01-16T09:09:01
Start               : 2019-01-16T09:09:03
End                 : 2019-01-16T09:11:38
Reserved walltime   : 00:30:00
Used walltime       : 00:02:35
Used CPU time       : 01:20:09 (efficiency: 258.55%)
% User (Computation): 76.92%
% System (I/O)      : 23.07%
Mem reserved        : 8G/node
Max Mem used        : 2.96G (pg-gpu01)
Max Disk Write      : 342.76M (pg-gpu01)
Max Disk Read       : 274.46M (pg-gpu01)


Acknowledgements:
=================

Please see this page if you want to acknowledge Peregrine in your publications:

https://redmine.hpc.rug.nl/redmine/projects/peregrine/wiki/ScientificOutput

################################################################################
